webpackJsonp([19],{FZzY:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("woOf"),r=n.n(a),s=n("Xxa5"),i=n.n(s),o=n("exGp"),c=n.n(o),u=n("iZz8"),m=n("7t+N"),h=n.n(m),d={data:function(){return{url:"",isLoaded:!1,isHaveContent:!1,baseInfo:{avatarUrl:"",name:"",branchName:"",phone:"",QRImg:""}}},methods:{initTopRight:function(e){var t=sessionStorage.getItem("esm_neededParams")||this.$route.query.neededParams,n=(sessionStorage.getItem("esm_wxShareUrl")||this.$route.query.wxShareUrl)+"/html/esm/index.html#"+this.$route.path+"?neededParams="+t+"&url="+this.$route.query.url+"&agentNo="+(sessionStorage.getItem("agentNo1")||this.$route.query.agentNo);console.log(n),n&&this.Athena.showTopRight("share",{editCall:"app.call.edit",type:this.Athena.shareWechat+this.Athena.shareWechatFriends,url:n,title:"仁和e商城",txt:e||""})},getAvatarUrl:function(e){var t="";return e.forEach(function(e){"0"===e.imageType&&(t=e.stringImageData)}),t},getQRImgUrl:function(e){var t="";return e.forEach(function(e){"2"===e.imageType&&(t=e.stringImageData)}),t},_getThirdContent:function(){var e=this;return c()(i.a.mark(function t(){var n,a,r,s,o,c;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.isHaveContent=!1,n=e.$route.query.url,e.isLoaded=!1,t.next=5,Object(u.b)(n);case 5:a=t.sent,r=a.status,s=a.data,o=s.flag,c=s.content;try{200===r&&"Y"===o?(e.isHaveContent=!0,e.$nextTick(function(){if(e.isLoaded=!0,h()("#contentesm").html(c),document.querySelectorAll("#contentesm").length>1){var t=document.querySelectorAll("#contentesm")[1].innerHTML;h()("#contentesm").html(t)}h()("#contentesm").find("script").remove(),e.getwxImg()})):(e.isLoaded=!0,e.$alert.show("服务端错误"))}catch(t){console.log(t),e.isLoaded=!0,e.$alert.show("服务端错误")}case 8:case"end":return t.stop()}},t,e)}))()},_getSimpleBusinessCard:function(){var e=this;return c()(i.a.mark(function t(){var n,a,s,o,c,m,h,d,l;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=sessionStorage.getItem("agentNo1")||e.$route.query.agentNo,t.next=3,Object(u.a)(n);case 3:a=t.sent,s=a.status,o=a.data,c=o.listPersonalPictureDTO,m=o.branchName,h=o.name,d=o.phone;try{200===s?(l={name:h,phone:d,branchName:m,avatarUrl:e.getAvatarUrl(c),QRImg:e.getQRImgUrl(c)},r()(e.baseInfo,l)):e.$alert.show("服务端错误")}catch(t){console.log(t),e.$alert.show("服务端错误")}case 6:case"end":return t.stop()}},t,e)}))()},showImg:function(e){var t="frameimg"+Math.random();return window.img='<img id="img" src=\''+e+"?"+t+"' /><script>window.onload = function() { parent.document.getElementById('"+t+"').height = document.getElementById('img').height+'px'; }<\/script>",t+'&<iframe id="'+t+'" frameBorder="0" scrolling="no" width="100%"></iframe>'},getwxImg:function(){var e=this,t=[];h()("#contentesm img").each(function(e,n){t.push(h()(n).attr("src"))}),t.forEach(function(n,a){var r=e.showImg(n);document.getElementsByTagName("img")[a].innerHTML=r.split("&")[1],document.getElementsByTagName("img")[a].setAttribute("src",t[a]+"?"+r.split("&")[0])})}},activated:function(){var e=this.$route.query.title;this.initTopRight(e),this._getThirdContent()},beforeRouteLeave:function(e,t,n){this.Athena.showTopRight("gone"),n()},mounted:function(){this._getSimpleBusinessCard()}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.isHaveContent?a("div",{attrs:{id:"contentesm"}}):e._e(),e._v(" "),a("div",{staticClass:"bottom"},[a("div",{staticClass:"avatar"},[a("img",{attrs:{src:e.baseInfo.avatarUrl||n("Su9L"),alt:""}})]),e._v(" "),a("div",{staticClass:"text"},[a("div",[e._v(e._s(e.baseInfo.name))]),e._v(" "),a("div",[e._v(e._s(e.baseInfo.branchName))]),e._v(" "),a("div",[e._v("手机:"+e._s(e.baseInfo.phone))])]),e._v(" "),a("div",{staticClass:"weixinQR"},[a("img",{attrs:{src:e.baseInfo.QRImg,alt:""}})])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isLoaded,expression:"!isLoaded"}],staticClass:"loading"},[a("img",{attrs:{src:n("W7jy"),alt:""}})])])},staticRenderFns:[]};var g=n("VU/8")(d,l,!1,function(e){n("nKA8")},"data-v-394e5c80",null);t.default=g.exports},nKA8:function(e,t){}});
//# sourceMappingURL=19.c97aed1c0465f3292325.js.map