webpackJsonp([10],{HZNL:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Xxa5"),r=a.n(s),i=a("woOf"),n=a.n(i),o=a("mvHQ"),h=a.n(o),l=a("exGp"),c=a.n(l),u=a("iZz8"),d=a("37Up"),g={data:function(){return{hotNewsList:[],isLoaded:!1,isNoRecord:!1,baseInfo:{avatarUrl:"",name:"",branchName:"",phone:"",QRImg:""}}},beforeRouteEnter:function(t,e,a){a(function(t){t.initTopRight()})},beforeRouteLeave:function(t,e,a){this.Athena.showTopRight("gone"),a()},mounted:function(){this.getHotNewsList()},activated:function(){this._getSimpleBusinessCard(),this.initTopRight()},methods:{handleClick:function(t,e,a,s,r,i,n){if(e){var o=this.$route.query.agentNo,h=this.$route.query.shareUrl;this.$router.push({path:"/newsDetail",query:{agentNo:o,newsId:n,wxShareUrl:h,title:i}})}else{var l=this.$route.query.neededParams,c=this.$route.query.agentNo,u=this.$route.query.shareUrl;this.isLoaded=!1;var d=this._getIsApp();if("Y"!==s&&d)return this.$alert.show("请分享到微信后再查看该活动"),void(this.isLoaded=!0);if("Y"===r)return this.$router.push({path:"/hotNewsDetail",query:{url:a,neededParams:l,agentNo:c,title:i,wxShareUrl:u}}),void(this.isLoaded=!0);this.shareThirdUrl(a,i),location.href=a}},getHotNewsList:function(){var t=this;this.isLoaded=!1,this.isNoRecord=!1,this.$http({method:"get",url:"/newWechat/getHotNews",data:{agentNo:localStorage.getItem("agentNo")||this.$route.query.agentNo}}).then(function(e){t.isLoaded=!0,200===e.code?e.data&&e.data.length>0?t.hotNewsList=e.data:t.isNoRecord=!0:t.$alert.show("服务端错误")}).catch(function(e){console.log(e),t.$alert.show("服务端错误")})},getAvatarUrl:function(t){var e="";return t.forEach(function(t){"0"===t.imageType&&(e=t.stringImageData)}),e},getQRImgUrl:function(t){var e="";return t.forEach(function(t){"2"===t.imageType&&(e=t.stringImageData)}),e},_getIsApp:function(){return Object(d.b)()},shareThirdUrl:function(t,e){t&&this.Athena.showTopRight("share",{editCall:"app.call.edit",type:this.Athena.shareWechat+this.Athena.shareWechatFriends,url:t,title:"仁和e商城",txt:e||""})},_getSimpleBusinessCard:function(){var t=this;return c()(r.a.mark(function e(){var a,s,i,o,l,c,d,g,p;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=sessionStorage.getItem("agentNo1")||t.$route.query.agentNo,e.next=3,Object(u.a)(a);case 3:s=e.sent,i=s.status,o=s.data,l=o.listPersonalPictureDTO,c=o.branchName,d=o.name,g=o.phone;try{200===i?(p={name:d,phone:g,branchName:c,avatarUrl:t.getAvatarUrl(l),QRImg:t.getQRImgUrl(l)},sessionStorage.setItem("agentInfo",h()(p)),n()(t.baseInfo,p)):t.$alert.show("服务端错误")}catch(e){console.log(e),t.$alert.show("服务端错误")}case 6:case"end":return e.stop()}},e,t)}))()},initTopRight:function(){var t=sessionStorage.getItem("neededParams")||this.$route.query.neededParams,e=this.$route.query.agentNo,a=sessionStorage.getItem("esm_wxShareUrl")+"/html/esm/index.html#"+this.$route.path+"?neededParams="+t+"&agentNo="+e;a&&this.Athena.showTopRight("share",{editCall:"app.call.edit",type:this.Athena.shareWechat+this.Athena.shareWechatFriends,url:a,title:"仁和e商城",txt:"热门资讯"})},share:function(t){var e="",a=this.$route.query.shareUrl,s=this.$route.query.agentNo;e=t.img?a+"/html/esm/index.html#/newsDetail?agentNo="+s+"&newsId="+t.newsId+"&title="+t.title+"&wxShareUrl="+a:"Y"===t.supportBusiCard?a+"/html/esm/index.html#/hotNewsDetail?agentNo="+s+"&url="+t.newsUrl+"&title="+t.title+"&wxShareUrl="+a:t.newsUrl,this.Athena.share("url",e,"仁和e商城",t.title,this.Athena.shareWechat+this.Athena.shareWechatFriends,t.imgSmall.split(",")[1])}}},p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"hotNews borderTop-1px"},[s("ul",{staticClass:"hotNewsList"},t._l(t.hotNewsList,function(e,a){return s("li",{key:a,staticClass:"hotNewsItem borderTop-1px",on:{click:function(s){t.handleClick(a,e.img,e.newsUrl,e.supportAppOpen,e.supportBusiCard,e.title,e.newsId)}}},[s("div",{staticClass:"avatar"},[s("img",{attrs:{src:e.imgSmall,alt:""}})]),t._v(" "),s("div",{staticClass:"text"},[s("div",[t._v(t._s(e.title))]),t._v(" "),s("div",{staticClass:"sharebar"},[s("span",[t._v(t._s(e.createDate))]),t._v(" "),s("span",{staticClass:"share",on:{click:function(a){a.stopPropagation(),t.share(e)}}},[s("i",{staticClass:"icon-share"}),t._v("分享")])])])])})),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isNoRecord,expression:"isNoRecord"}],staticClass:"noRecord"},[t._m(0),t._v(" "),s("div",[t._v("暂无数据")])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isLoaded,expression:"!isLoaded"}],staticClass:"loading"},[s("img",{attrs:{src:a("W7jy"),alt:""}})])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("img",{attrs:{src:a("Kofj"),alt:""}})])}]};var m=a("VU/8")(g,p,!1,function(t){a("dP/N")},"data-v-3d659241",null);e.default=m.exports},Kofj:function(t,e,a){t.exports=a.p+"static/img/noRecord.651eb78.png"},"dP/N":function(t,e){}});
//# sourceMappingURL=10.39a11eaef796e0e1b43e.js.map