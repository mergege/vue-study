webpackJsonp([13],{UwQx:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("mvHQ"),a=s.n(i),o=s("AdN4"),r=s("sihj"),n=s("71e1"),c=s.n(n),m=s("1QNT"),h=s("kgJZ"),l=s("3L8I").base_URL,d={name:"flightDetail",data:function(){return{firstIndex:0,firstTab:["产品介绍","常见问题"],code:"",productName:"",fullName:"",wxShareUrl:"",interfaceUrl:"",images:{banner:"",duty:"",detail:"",question:"",code:"",smallImg:""},InsureUrl:"",shareQrcode:""}},components:{bottomNav:o.a,msgBox:r.a},activated:function(){var e=this;this.Athena.register("app","call","flightSmallImage",this.compressHeaderImage,!0),this.images.banner="",this.images.duty="",this.images.detail="",this.images.question="",this.images.smallImg="",this.images.code="",this.$http({url:"/../dcs-fpc/msp-web"},!1).then(function(t){e.wxShareUrl=t.propertySources[0].source.wxShareUrl,e.interfaceUrl=e.wxShareUrl+"/RH_MSPSERVER/wechat/productImage/",e.code=e.$route.query.code,e.productName=e.$route.query.productName,e.fullName=e.$route.query.productFullName,e.description=e.$route.query.description,e.firstIndex=0,document.title=e.productName,e.Athena.setTitle(e.productName),e.initData(),e.initTopRight()}).catch(function(){alert("服务器出错")})},methods:{initData:function(){this.images.banner="",this.images.duty="",this.images.detail="",this.images.question="",this.images.smallImg="",this.images.code="",this.images.banner=this.interfaceUrl+this.code+"-banner.jpg",this.images.duty=this.interfaceUrl+this.code+"-productDuty-1.jpg",this.images.detail=this.interfaceUrl+this.code+"-detail.jpg",this.images.question=this.interfaceUrl+this.code+"-question.jpg",this.images.smallImg=this.interfaceUrl+this.code+"-smallImage.jpg"},choose:function(e){this.firstIndex=e},initTopRight:function(){var e=this,t="",s="";s=(t="fxb"===this.code?"/RH_MSPSERVER"===l?"msp.cmrh.com"===location.host?"https://ols.cmrh.com/ols/html/ias/#/sxp/index/fxb?neededParams=":"https://ols-di1.sit.cmrh.com/ols/html/ias/#/sxp/index/fxb?neededParams=":l.indexOf("msp.cmrh.com")>-1?"https://ols.cmrh.com/ols/html/ias/#/sxp/index/fxb?neededParams=":"https://ols-di1.sit.cmrh.com/ols/html/ias/#/sxp/index/fxb?neededParams=":"/RH_MSPSERVER"===l?"msp.cmrh.com"===location.origin?"https://ols.cmrh.com/ols/html/ias/#/sxp/index/tqb?neededParams=":"https://ols-di1.sit.cmrh.com/ols/html/ias/#/sxp/index/tqb?neededParams=":l.indexOf("msp.cmrh.com")>-1?"https://ols.cmrh.com/ols/html/ias/#/sxp/index/tqb?neededParams=":"https://ols-di1.sit.cmrh.com/ols/html/ias/#/sxp/index/tqb?neededParams=")+encodeURIComponent(a()({type:"json",params:{applySource:"F3",agentNo:sessionStorage.getItem("agentNo1")||localStorage.getItem("agentNo")}})),t+=encodeURIComponent(a()({type:"json",params:{applySource:"F3",agentNo:sessionStorage.getItem("agentNo1")||localStorage.getItem("agentNo")}}).replace(/"/g,'\\"')),this.InsureUrl=t,s=h.a.decodeUrl(s),console.log("qrcodeUrl",s),c.a.toDataURL(s).then(function(t){Object(m.a)(t,e.images.smallImg,{width:256,height:256,iconRadius:5,iconBorderWidth:5,iconBorderColor:"#fff"}).then(function(t){e.shareQrcode=t,console.log("shareQrcode",e.shareQrcode)})}),this.Athena.showTopRight("share",{type:this.Athena.shareWechat+this.Athena.shareWechatFriends,url:t,title:this.fullName,txt:this.description,icon:"app.call.flightSmallImage"})},compressHeaderImage:function(){var e=this,t=new Image;t.onload=function(){var s=t.width,i=t.height,a=Math.max(s,i),o=document.createElement("canvas");o.width=150,o.height=150;var r=o.getContext("2d");r.rect(0,0,a,a),r.fillStyle="#ffffff",r.fill(),r.drawImage(t,0,0,s,i,(150-s/a*150)/2,(150-i/a*150)/2,s/a*150,i/a*150);var n=o.toDataURL("image/jpeg",.9);e.Athena.sendData("shareQrCodeImage",{qrCodeImage:e.shareQrcode.split(",")[1],icon:n.split(",")[1]})},t.src=this.images.smallImg}},beforeRouteLeave:function(e,t,s){this.Athena.showTopRight("gone"),s()}},g={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"detail-wrap"},[s("div",{staticClass:"title-img"},[s("img",{attrs:{src:e.images.banner}})]),e._v(" "),s("div",{staticClass:"imgShow"},[s("img",{attrs:{src:e.images.duty}})]),e._v(" "),s("div",{staticClass:"tab"},e._l(e.firstTab,function(t,i){return s("div",{key:i,class:{selected:e.firstIndex===i},on:{click:function(t){e.choose(i)}}},[e._v(e._s(t))])})),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0===e.firstIndex,expression:"firstIndex === 0"}],staticClass:"imgShow"},[s("img",{attrs:{src:e.images.detail}})]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:1===e.firstIndex,expression:"firstIndex === 1"}],staticClass:"imgShow"},[s("img",{attrs:{src:e.images.question}})])])},staticRenderFns:[]};var p=s("VU/8")(d,g,!1,function(e){s("lnCi")},"data-v-b9e8b3f4",null);t.default=p.exports},lnCi:function(e,t){}});
//# sourceMappingURL=13.a1f3f4e18a2dda296d22.js.map