webpackJsonp([21],{XaHV:function(e,t){},g6eJ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),s=a.n(i),o=a("71e1"),r=a.n(o),n=a("1QNT"),l=a("kgJZ"),c=a("3L8I").base_URL,m={name:"gentleLifetimeDetail",data:function(){return{code:"",productName:"",fullName:"",wxShareUrl:"",interfaceUrl:"",images:{banner:"",detail:"",code:"",smallImg:""},shareQrcode:""}},activated:function(){var e=this;this.Athena.register("app","call","lifetimeSmallImage",this.compressHeaderImage,!0),this.images.banner="",this.images.detail="",this.images.smallImg="",this.images.code="",this.$http({url:"/../dcs-fpc/msp-web"},!1).then(function(t){e.wxShareUrl=t.propertySources[0].source.wxShareUrl,e.interfaceUrl=e.wxShareUrl+"/RH_MSPSERVER/wechat/productImage/",e.code=e.$route.query.code,e.productName=e.$route.query.productName,e.fullName=e.$route.query.productFullName,e.description=e.$route.query.description,e.firstIndex=0,document.title=e.productName,e.Athena.setTitle(e.productName),e.initData(),e.initTopRight()}).catch(function(){alert("服务器出错")})},methods:{initData:function(){this.images.banner="",this.images.detail="",this.images.smallImg="",this.images.code="",this.images.banner=this.interfaceUrl+this.code+"-banner.jpg",this.images.detail=this.interfaceUrl+this.code+"-detail.jpg",this.images.smallImg=this.interfaceUrl+this.code+"-smallImage.jpg"},initTopRight:function(){var e=this,t="",a="";a=(t="/RH_MSPSERVER"===c?"msp.cmrh.com"===location.host?"https://ols.cmrh.com/ols/static/mapply/ltonline/html/index.html?":"https://ols-di1.sit.cmrh.com/ols/static/mapply/ltonline/html/index.html?":c.indexOf("msp.cmrh.com")>-1?"https://ols.cmrh.com/ols/static/mapply/ltonline/html/index.html?":"https://ols-di1.sit.cmrh.com/ols/static/mapply/ltonline/html/index.html?")+encodeURIComponent(s()({type:"json",params:{applySource:"F3",agentNo:sessionStorage.getItem("agentNo1")||localStorage.getItem("agentNo")}})),t+=encodeURIComponent(s()({type:"json",params:{applySource:"F3",agentNo:sessionStorage.getItem("agentNo1")||localStorage.getItem("agentNo")}}).replace(/"/g,'\\"')),a=l.a.decodeUrl(a),console.log("qrcodeUrl",a),r.a.toDataURL(a).then(function(t){Object(n.a)(t,e.images.smallImg,{width:256,height:256,iconRadius:5,iconBorderWidth:5,iconBorderColor:"#fff"}).then(function(t){e.shareQrcode=t,console.log("shareQrcode",e.shareQrcode)})}),this.Athena.showTopRight("share",{type:this.Athena.shareWechat+this.Athena.shareWechatFriends,url:t,title:this.fullName,txt:this.description,icon:"app.call.lifetimeSmallImage"})},compressHeaderImage:function(){var e=this,t=new Image;t.onload=function(){var a=t.width,i=t.height,s=Math.max(a,i),o=document.createElement("canvas");o.width=150,o.height=150;var r=o.getContext("2d");r.rect(0,0,s,s),r.fillStyle="#ffffff",r.fill(),r.drawImage(t,0,0,a,i,(150-a/s*150)/2,(150-i/s*150)/2,a/s*150,i/s*150);var n=o.toDataURL("image/jpeg",.9);e.Athena.sendData("shareQrCodeImage",{qrCodeImage:e.shareQrcode.split(",")[1],icon:n.split(",")[1]})},t.src=this.images.smallImg}}},h={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"detail-wrap"},[t("div",{staticClass:"title-img"},[t("img",{attrs:{src:this.images.banner}})]),this._v(" "),t("div",{staticClass:"img-show"},[t("img",{attrs:{src:this.images.detail}})])])},staticRenderFns:[]};var d=a("VU/8")(m,h,!1,function(e){a("XaHV")},"data-v-2171870f",null);t.default=d.exports}});
//# sourceMappingURL=21.d09e93e9d69e3888dbc3.js.map