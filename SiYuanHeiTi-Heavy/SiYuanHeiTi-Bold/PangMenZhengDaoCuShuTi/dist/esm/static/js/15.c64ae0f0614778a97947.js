webpackJsonp([15],{"0Dg+":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("mvHQ"),i=s.n(a),r=s("AdN4"),o=s("sihj"),n=s("71e1"),c=s.n(n),h=s("1QNT"),m=s("kgJZ"),l=s("3L8I").base_URL,d={name:"flightDetail",data:function(){return{firstIndex:0,firstTab:["产品介绍","常见问题"],code:"",productName:"",fullName:"",wxShareUrl:"",interfaceUrl:"",images:{banner:"",duty:"",detail:"",question:"",code:"",smallImg:""},InsureUrl:"",shareQrcode:""}},components:{bottomNav:r.a,msgBox:o.a},activated:function(){var e=this;this.Athena.register("app","call","cxbSmallImage",this.compressHeaderImage,!0),this.images.banner="",this.images.duty="",this.images.detail="",this.images.question="",this.images.smallImg="",this.images.code="",this.$http({url:"/../dcs-fpc/msp-web"},!1).then(function(t){e.wxShareUrl=t.propertySources[0].source.wxShareUrl,e.interfaceUrl=e.wxShareUrl+"/RH_MSPSERVER/wechat/productImage/",e.code=e.$route.query.code,e.productName=e.$route.query.productName,e.fullName=e.$route.query.productFullName,e.description=e.$route.query.description,e.firstIndex=0,document.title=e.productName,e.Athena.setTitle(e.productName),e.initData(),e.initTopRight()}).catch(function(){alert("服务器出错")})},methods:{initData:function(){this.images.banner="",this.images.duty="",this.images.detail="",this.images.question="",this.images.smallImg="",this.images.code="",this.images.banner=this.interfaceUrl+this.code+"-banner.jpg",this.images.duty=this.interfaceUrl+this.code+"-productDuty-1.jpg",this.images.detail=this.interfaceUrl+this.code+"-detail.jpg",this.images.question=this.interfaceUrl+this.code+"-question.jpg",this.images.smallImg=this.interfaceUrl+this.code+"-smallImage.jpg"},choose:function(e){this.firstIndex=e},initTopRight:function(){var e=this,t="",s="";s=(t="/RH_MSPSERVER"===l?"msp.cmrh.com"===location.host?"https://ols.cmrh.com/site-ols/cxb/#/index?neededParams=":"https://ols-di1.sit.cmrh.com/site-ols/cxb/#/index?neededParams=":l.indexOf("msp.cmrh.com")>-1?"https://ols.cmrh.com/site-ols/cxb/#/index?neededParams=":"https://ols-di1.sit.cmrh.com/site-ols/cxb/#/index?neededParams=")+encodeURIComponent(i()({type:"json",params:{applySource:"F3",agentNo:sessionStorage.getItem("agentNo1")||localStorage.getItem("agentNo")}})),t+=encodeURIComponent(i()({type:"json",params:{applySource:"F3",agentNo:sessionStorage.getItem("agentNo1")||localStorage.getItem("agentNo")}}).replace(/"/g,'\\"')),this.InsureUrl=t,s=m.a.decodeUrl(s),console.log("qrcodeUrl",s),c.a.toDataURL(s).then(function(t){Object(h.a)(t,e.images.smallImg,{width:256,height:256,iconRadius:5,iconBorderWidth:5,iconBorderColor:"#fff"}).then(function(t){e.shareQrcode=t,console.log("shareQrcode",e.shareQrcode)})}),this.Athena.showTopRight("share",{type:this.Athena.shareWechat+this.Athena.shareWechatFriends,url:t,title:this.fullName,txt:this.description,icon:"app.call.cxbSmallImage"})},compressHeaderImage:function(){var e=this,t=new Image;t.onload=function(){var s=t.width,a=t.height,i=Math.max(s,a),r=document.createElement("canvas");r.width=150,r.height=150;var o=r.getContext("2d");o.rect(0,0,i,i),o.fillStyle="#ffffff",o.fill(),o.drawImage(t,0,0,s,a,(150-s/i*150)/2,(150-a/i*150)/2,s/i*150,a/i*150);var n=r.toDataURL("image/jpeg",.9);e.Athena.sendData("shareQrCodeImage",{qrCodeImage:e.shareQrcode.split(",")[1],icon:n.split(",")[1]})},t.src=this.images.smallImg}},beforeRouteLeave:function(e,t,s){this.Athena.showTopRight("gone"),s()}},g={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"detail-wrap"},[s("div",{staticClass:"title-img"},[s("img",{attrs:{src:e.images.banner}})]),e._v(" "),s("div",{staticClass:"imgShow"},[s("img",{attrs:{src:e.images.duty}})]),e._v(" "),s("div",{staticClass:"tab"},e._l(e.firstTab,function(t,a){return s("div",{key:a,class:{selected:e.firstIndex===a},on:{click:function(t){e.choose(a)}}},[e._v(e._s(t))])})),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0===e.firstIndex,expression:"firstIndex === 0"}],staticClass:"imgShow"},[s("img",{attrs:{src:e.images.detail}})]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:1===e.firstIndex,expression:"firstIndex === 1"}],staticClass:"imgShow"},[s("img",{attrs:{src:e.images.question}})])])},staticRenderFns:[]};var u=s("VU/8")(d,g,!1,function(e){s("xBNL")},"data-v-a64cfdf0",null);t.default=u.exports},xBNL:function(e,t){}});
//# sourceMappingURL=15.c64ae0f0614778a97947.js.map